<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta
			name="viewport"
			content="initial-scale=1,maximum-scale=1,user-scalable=no"
		/>
		<title>London's Key Bus Line Real Time Tracker</title>
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<!--Stylesheets-->
		<link
			rel="stylesheet"
			href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.css"
			type="text/css"
		/>
		<link
			href="https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.css"
			rel="stylesheet"
		/>
		<link
			href="https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.css"
			rel="stylesheet"
		/>
		<link href="styles.css" rel="stylesheet" />

		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
			crossorigin="anonymous"
		/>

		<!--JavaScript-->
		<script src="https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.js"></script>
		<script src="script.js"></script>
		<script src="stoplocations.js"></script>
		<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.0/mapbox-gl-geocoder.min.js"></script>
		<!-- Promise polyfill script required to use Mapbox GL Geocoder in IE 11 -->
		<script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js"></script>

		<style>
			.bd-placeholder-img {
				font-size: 1.125rem;
				text-anchor: middle;
				-webkit-user-select: none;
				-moz-user-select: none;
				user-select: none;
			}

			@media (min-width: 768px) {
				.bd-placeholder-img-lg {
					font-size: 3.5rem;
				}
			}
		</style>
	</head>
	<body>
		<main>
			<div class="container py-4">
				<header class="pb-3 mb-4 border-bottom">
					<a
						href="https://danwestfall.design/"
						class="d-flex align-items-center text-dark text-decoration-none"
					>
						<span class="px-2">
							<svg
								xmlns="http://www.w3.org/2000/svg"
								width="32"
								height="32"
								fill="currentColor"
								class="bi bi-truck"
								viewBox="0 0 16 16"
							>
								<path
									d="M0 3.5A1.5 1.5 0 0 1 1.5 2h9A1.5 1.5 0 0 1 12 3.5V5h1.02a1.5 1.5 0 0 1 1.17.563l1.481 1.85a1.5 1.5 0 0 1 .329.938V10.5a1.5 1.5 0 0 1-1.5 1.5H14a2 2 0 1 1-4 0H5a2 2 0 1 1-3.998-.085A1.5 1.5 0 0 1 0 10.5v-7zm1.294 7.456A1.999 1.999 0 0 1 4.732 11h5.536a2.01 2.01 0 0 1 .732-.732V3.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .294.456zM12 10a2 2 0 0 1 1.732 1h.768a.5.5 0 0 0 .5-.5V8.35a.5.5 0 0 0-.11-.312l-1.48-1.85A.5.5 0 0 0 13.02 6H12v4zm-9 1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm9 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"
								/>
							</svg>
						</span>
						<span class="fs-4"
							>London's Key Bus Line Real Time
							Tracker</span
						>
					</a>
				</header>

				<div class="p-5 mb-4 bg-light rounded-3">
					<div class="container-fluid py-5" id="map"></div>
				</div>

				<div class="row align-items-md-stretch">
					<div class="col-md-6">
						<div class="h-100 p-5 rounded-3">
							<h1>Lines</h1>

							<div
								class="btn-group"
								role="group"
								aria-label="Basic radio toggle button group"
							>
								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio1"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio1"
									>8</label
								>

								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio2"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio2"
									>9</label
								>

								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio3"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio3"
									>11</label
								>

								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio4"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio4"
									>14</label
								>

								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio5"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio5"
									>15</label
								>
							</div>
							<div
								class="btn-group"
								role="group"
								aria-label="Basic radio toggle button group"
							>
								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio6"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio6"
									>23</label
								>

								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio7"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio7"
									>24</label
								>

								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio8"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio8"
									>25</label
								>

								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio9"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio9"
									>38</label
								>

								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio10"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio10"
									>43</label
								>
							</div>
							<div
								class="btn-group"
								role="group"
								aria-label="Basic radio toggle button group"
							>
								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio11"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio11"
									>59</label
								>

								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio12"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio12"
									>73</label
								>

								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio13"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio13"
									>74</label
								>

								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio14"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio14"
									>88</label
								>

								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio15"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio15"
									>139</label
								>
							</div>
							<div
								class="btn-group"
								role="group"
								aria-label="Basic radio toggle button group"
							>
								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio16"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio16"
									>148</label
								>

								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio17"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio17"
									>159</label
								>

								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio18"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio18"
									>188</label
								>

								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio19"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio19"
									>205</label
								>

								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio20"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio20"
									>274</label
								>
							</div>
							<div
								class="btn-group"
								role="group"
								aria-label="Basic radio toggle button group"
							>
								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio21"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio21"
									>390</label
								>

								<input
									type="radio"
									class="btn-check"
									name="btnradio"
									id="btnradio22"
									autocomplete="off"
								/>
								<label
									class="btn btn-outline-primary"
									for="btnradio22"
									>453</label
								>
							</div>
						</div>
					</div>
					<div class="col-md-6">
						<div class="h-100 p-5 bg-light border rounded-3">
							<h2 id="linetitle"></h2>
							<p id="lineinfo"></p>
						</div>
					</div>
				</div>

				<footer class="pt-3 mt-4 text-muted border-top">
					&copy; Daniel Westfall 2021
				</footer>
			</div>
		</main>

		<div id="container">
			<!-- populated by JS-->
		</div>

		<script>
			//Map created - centered over London - no bus lines shown until a line is selected

			mapboxgl.accessToken =
				"pk.eyJ1IjoiZGFud2VzdGZhbGwiLCJhIjoiY2tsdm9sMTZ2MDE0ZzJwbzNsZjZnanR3diJ9.siHEwArUzuKkseW3Xa72tg";

			var map = new mapboxgl.Map({
				container: "map",
				style: "mapbox://styles/danwestfall/ckm70cxfd1tot17m894ctkfqv",
				center: [-0.115, 51.5],
				zoom: 10.0,
			});

			//Dynamically switch lines - this will make it easier to do more with later for the interface plus practice with DOM elements
			var userSelection = document.getElementsByClassName("btn-check");

			let newArray = [
				8, 9, 11, 14, 15, 23, 24, 25, 38, 43, 59, 73, 74, 88, 139,
				148, 159, 188, 205, 274, 390, 453,
			];

			//function to change in contents of linetitle and lineinfo based on user selection
			function changeLine(line) {
				document.getElementById("linetitle").innerHTML =
					"Line " + line;
				document.getElementById("lineinfo").innerHTML =
					"Click on a purple marker to see a bus's location. Line " +
					line +
					"'s stops are in blue and identify which alternate lines connect with that stop.";
			}

			for (var i = 0; i < userSelection.length; i++) {
				(function (index) {
					userSelection[index].addEventListener(
						"click",
						function () {
							let arg = newArray[index];
							switchLine(arg);
							changeLine(arg);
						}
					);
				})(i);
			}
		</script>
	</body>
</html>
